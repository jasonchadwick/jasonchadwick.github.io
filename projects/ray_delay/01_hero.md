Figure 1. Overview of our method, showing the timeline of a magic state factory before and after a cosmic ray event. (a) The factory is operating normally. (b) A cosmic ray hits the chip, severely affecting physical qubit error rates nearby and causing the factory to output low-quality magic states. (c) The cosmic ray is detected after some delay. The distilled magic states in the buffer (yellow) are discarded, the affected physical qubits are turned offline, and the factory is re-mapped to avoid using the offline areas. The factory can continue to operate at reduced speed. (d) The affected physical qubits recover from the ray impact and are turned back online. The factory resumes normal operation.